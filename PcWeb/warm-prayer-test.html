<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¯¸ë‹ˆë©€ ê¸°ë„ íŒì—… í…ŒìŠ¤íŠ¸ - ì‹œì•ˆ A</title>
    <link rel="stylesheet" href="css/minimal-prayer-popup.css">
    <style>
        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
        }
        
        .container {
            max-width: 800px;
            width: 100%;
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            color: #1f2937;
            text-align: center;
            margin-bottom: 10px;
            font-size: 28px;
            font-weight: 700;
        }
        
        .subtitle {
            text-align: center;
            color: #6b7280;
            margin-bottom: 30px;
            font-size: 16px;
        }
        
        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: inherit;
        }
        
        .btn-primary {
            background: #3b82f6;
            color: white;
        }
        
        .btn-primary:hover {
            background: #2563eb;
            transform: translateY(-1px);
        }
        
        .btn-secondary {
            background: #6b7280;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #4b5563;
            transform: translateY(-1px);
        }
        
        .btn-danger {
            background: #ef4444;
            color: white;
        }
        
        .btn-danger:hover {
            background: #dc2626;
            transform: translateY(-1px);
        }
        
        .demo-area {
            position: relative;
            height: 300px;
            background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
            border-radius: 12px;
            border: 2px dashed #d1d5db;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 30px;
            overflow: hidden;
        }
        
        .demo-placeholder {
            color: #9ca3af;
            font-size: 16px;
            text-align: center;
            padding: 20px;
        }
        
        .info-section {
            background: #f9fafb;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
        }
        
        .info-section h3 {
            color: #1f2937;
            margin-bottom: 15px;
            font-size: 18px;
            font-weight: 600;
        }
        
        .info-section ul {
            color: #4b5563;
            line-height: 1.6;
            margin: 0;
            padding-left: 20px;
        }
        
        .info-section li {
            margin-bottom: 8px;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .feature-item {
            background: white;
            border-radius: 8px;
            padding: 20px;
            border: 1px solid #e5e7eb;
        }
        
        .feature-item h4 {
            color: #1f2937;
            margin-bottom: 10px;
            font-size: 16px;
            font-weight: 600;
        }
        
        .feature-item p {
            color: #6b7280;
            margin: 0;
            font-size: 14px;
            line-height: 1.5;
        }
        
        .status {
            text-align: center;
            padding: 15px;
            margin-top: 20px;
            border-radius: 8px;
            font-weight: 500;
        }
        
        .status.active {
            background: #dcfce7;
            color: #166534;
            border: 1px solid #bbf7d0;
        }
        
        .status.inactive {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #fecaca;
        }
    </style>
</head>
<body>
    <!-- ê¸°ë„ ì•ˆë‚´ íŒì—… -->
    <div id="prayer-notification" class="prayer-notification hidden">
        <div class="prayer-notification-content">
            <span class="prayer-icon">ğŸ™</span>
            <span class="prayer-message"></span>
        </div>
    </div>
    
    <div class="container">
        <h1>ë¯¸ë‹ˆë©€ ê¸°ë„ íŒì—… í…ŒìŠ¤íŠ¸</h1>
        <p class="subtitle">ì‹œì•ˆ A: ê¹”ë”í•˜ê³  í˜„ëŒ€ì ì¸ ë¯¸ë‹ˆë©€ ì¹´ë“œ ìŠ¤íƒ€ì¼</p>
        <p class="subtitle"><strong>ìƒˆë¡œìš´ ê¸°ëŠ¥:</strong> ë§ˆìš°ìŠ¤ ì˜¤ë²„ ì‹œ ìˆœí™˜ ì¼ì‹œì •ì§€, ë‹«ê¸° ë²„íŠ¼ìœ¼ë¡œ íŒì—… ì œê±°</p>
        
                 <div class="controls">
             <button class="btn-primary" onclick="showSamplePopup()">ìƒ˜í”Œ íŒì—… í‘œì‹œ</button>
             <button class="btn-primary" onclick="startRotation()">ìˆœíšŒ ì‹œì‘</button>
             <button class="btn-secondary" onclick="stopRotation()">ìˆœíšŒ ì¤‘ì§€</button>
             <button class="btn-danger" onclick="clearPopups()">íŒì—… ì§€ìš°ê¸°</button>
             <button class="btn-primary" onclick="testPrayerClick()">ê¸°ë„ í´ë¦­ í…ŒìŠ¤íŠ¸</button>
             <button class="btn-primary" onclick="testPrayerNotification()">ê¸°ë„ ì•ˆë‚´ íŒì—… í…ŒìŠ¤íŠ¸</button>
             <button class="btn-primary" onclick="testMultiplePrayerClicks()">ê¸°ë„ í´ë¦­ í…ŒìŠ¤íŠ¸ ë™ì‹œ 10ê°œ</button>
             <button class="btn-secondary" onclick="checkQueueStatus()">í ìƒíƒœ í™•ì¸</button>
             <button class="btn-danger" onclick="clearQueue()">í ì´ˆê¸°í™”</button>
         </div>
        
        <div class="demo-area" id="demo-area">
            <div class="demo-placeholder">
                íŒì—…ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤<br>
                <small>ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ í…ŒìŠ¤íŠ¸í•´ë³´ì„¸ìš”</small>
            </div>
        </div>
        
        <div id="status" class="status inactive">
            ìˆœíšŒ ì¤‘ì§€ë¨
        </div>
        
        <div class="info-section">
            <h3>ğŸ¨ ì‹œì•ˆ A: ë¯¸ë‹ˆë©€ ì¹´ë“œ ìŠ¤íƒ€ì¼ íŠ¹ì§•</h3>
            <ul>
                <li><strong>ê¹”ë”í•œ ë””ìì¸:</strong> ìˆœìˆ˜í•œ í°ìƒ‰ ë°°ê²½ê³¼ ë¯¸ì„¸í•œ ë“œë¡­ ì„€ë„ìš°</li>
                <li><strong>í˜„ëŒ€ì  íƒ€ì´í¬ê·¸ë˜í”¼:</strong> Pretendard ì‚°ì„¸ë¦¬í”„ í°íŠ¸ ì‚¬ìš©</li>
                <li><strong>ë¯¸ë‹ˆë©€ ë ˆì´ì•„ì›ƒ:</strong> ë¶ˆí•„ìš”í•œ ì¥ì‹ ìš”ì†Œ ì œê±°</li>
                <li><strong>ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜:</strong> ìì—°ìŠ¤ëŸ¬ìš´ í˜ì´ë“œì¸ê³¼ í˜¸ë²„ íš¨ê³¼</li>
                <li><strong>ì ‘ê·¼ì„±:</strong> ë‹¤í¬ ëª¨ë“œ ì§€ì› ë° ëª¨ì…˜ ê°ì†Œ ì˜µì…˜</li>
                <li><strong>ë°˜ì‘í˜•:</strong> ëª¨ë°”ì¼ í™˜ê²½ì—ì„œë„ ìµœì í™”ëœ í‘œì‹œ</li>
            </ul>
        </div>
        
        <div class="info-section">
            <h3>âš™ï¸ ì£¼ìš” ê¸°ëŠ¥</h3>
            <div class="feature-grid">
                <div class="feature-item">
                    <h4>ìë™ ìˆœíšŒ</h4>
                    <p>ë“±ë¡ëœ ì„ êµì‚¬ë“¤ì˜ ê¸°ë„ ìš”ì²­ì„ 4ì´ˆë§ˆë‹¤ ìë™ìœ¼ë¡œ ìˆœíšŒí•˜ë©° í‘œì‹œí•©ë‹ˆë‹¤.</p>
                </div>
                <div class="feature-item">
                    <h4>ë§ˆìš°ìŠ¤ ì˜¤ë²„ ì œì–´</h4>
                    <p>íŒì—…ì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ë©´ ìë™ ìˆœíšŒê°€ ì¼ì‹œì •ì§€ë˜ê³ , ë§ˆìš°ìŠ¤ë¥¼ ë–¼ë©´ ì¬ê°œë©ë‹ˆë‹¤.</p>
                </div>
                <div class="feature-item">
                    <h4>ë‹«ê¸° ë²„íŠ¼</h4>
                    <p>íŒì—… ìš°ìƒë‹¨ì˜ Ã— ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ íŒì—…ì„ ë‹«ê³  ìˆœíšŒë¥¼ ì¬ê°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                </div>
                <div class="feature-item">
                    <h4>ì‹¤ì‹œê°„ ë°ì´í„°</h4>
                    <p>Firebaseì—ì„œ ì‹¤ì‹œê°„ìœ¼ë¡œ ì„ êµì‚¬ ì •ë³´ì™€ ê¸°ë„ ìš”ì²­ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.</p>
                </div>
                <div class="feature-item">
                    <h4>ì§€ëŠ¥í˜• ìœ„ì¹˜</h4>
                    <p>ë§ˆì»¤ ìœ„ì¹˜ì— ë§ì¶° íŒì—…ì„ í‘œì‹œí•˜ê³ , í™”ë©´ ê²½ê³„ë¥¼ ë²—ì–´ë‚˜ì§€ ì•Šë„ë¡ ìë™ ì¡°ì •í•©ë‹ˆë‹¤.</p>
                </div>
                <div class="feature-item">
                    <h4>ë¶€ë“œëŸ¬ìš´ ì „í™˜</h4>
                    <p>íŒì—… ê°„ ì „í™˜ ì‹œ ìì—°ìŠ¤ëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜ìœ¼ë¡œ ì‚¬ìš©ì ê²½í—˜ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.</p>
                </div>
            </div>
        </div>
        
        <div class="info-section">
            <h3>ğŸ’¡ ì‚¬ìš© ë°©ë²•</h3>
            <ul>
                <li><strong>ìƒ˜í”Œ íŒì—… í‘œì‹œ:</strong> í…ŒìŠ¤íŠ¸ìš© ìƒ˜í”Œ íŒì—…ì„ ì¦‰ì‹œ í‘œì‹œí•©ë‹ˆë‹¤</li>
                <li><strong>ìˆœíšŒ ì‹œì‘:</strong> ëª¨ë“  ì„ êµì‚¬ì˜ ê¸°ë„ ìš”ì²­ì„ ìë™ìœ¼ë¡œ ìˆœíšŒí•©ë‹ˆë‹¤</li>
                <li><strong>ìˆœíšŒ ì¤‘ì§€:</strong> ìë™ ìˆœíšŒë¥¼ ì¤‘ì§€í•˜ê³  í˜„ì¬ íŒì—…ì„ ì œê±°í•©ë‹ˆë‹¤</li>
                <li><strong>íŒì—… ì§€ìš°ê¸°:</strong> í™”ë©´ì˜ ëª¨ë“  íŒì—…ì„ ì¦‰ì‹œ ì œê±°í•©ë‹ˆë‹¤</li>
                <li><strong>ê¸°ë„ ì•ˆë‚´ íŒì—… í…ŒìŠ¤íŠ¸:</strong> ë‹¨ì¼ ê¸°ë„ ì•ˆë‚´ íŒì—…ì„ í‘œì‹œí•©ë‹ˆë‹¤</li>
                <li><strong>ê¸°ë„ í´ë¦­ í…ŒìŠ¤íŠ¸ ë™ì‹œ 10ê°œ:</strong> 10ëª…ì˜ ì„ êµì‚¬ì— ëŒ€í•œ ê¸°ë„ ì•ˆë‚´ íŒì—…ì„ íì— ì¶”ê°€í•˜ì—¬ ìˆœì°¨ ì²˜ë¦¬ë¥¼ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤</li>
                <li><strong>í ìƒíƒœ í™•ì¸:</strong> í˜„ì¬ ê¸°ë„ ì•ˆë‚´ íŒì—… íì˜ ìƒíƒœë¥¼ í™•ì¸í•©ë‹ˆë‹¤</li>
                <li><strong>í ì´ˆê¸°í™”:</strong> ê¸°ë„ ì•ˆë‚´ íŒì—… íë¥¼ ì´ˆê¸°í™”í•˜ê³  í˜„ì¬ íŒì—…ì„ ì œê±°í•©ë‹ˆë‹¤</li>
            </ul>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    
    <script src="js/ui/floatingPopups.js"></script>
    <script src="js/firebase-config.js"></script>
    <script src="js/prayerclick.js"></script>
    <script>
        // ìƒ˜í”Œ ë°ì´í„°
        const sampleMissionaries = [
            {
                name: "ê¹€ì„ êµ",
                country: "íƒœêµ­",
                country_code: "th",
                prayer_topic: "í˜„ì§€ êµíšŒ ê°œì²™ê³¼ ì–¸ì–´ í•™ìŠµì„ ìœ„í•´ ê¸°ë„í•´ ì£¼ì„¸ìš”."
            },
            {
                name: "ì´ë³µìŒ",
                country: "í•„ë¦¬í•€",
                country_code: "ph", 
                prayer_topic: "ì•„ì´ë“¤ êµìœ¡ ì‚¬ì—­ê³¼ ê±´ê°•ì„ ìœ„í•´ ê¸°ë„í•´ ì£¼ì„¸ìš”."
            },
            {
                name: "ë°•ì‚¬ë‘",
                country: "ìº„ë³´ë””ì•„",
                country_code: "kh",
                prayer_topic: "ì˜ë£Œ ë´‰ì‚¬ì™€ ë³µìŒ ì „íŒŒë¥¼ ìœ„í•´ ê¸°ë„í•´ ì£¼ì„¸ìš”."
            }
        ];

        // ìƒ˜í”Œ íŒì—… í‘œì‹œ
        function showSamplePopup() {
            clearPopups();
            
            const demoArea = document.getElementById('demo-area');
            const sampleData = sampleMissionaries[Math.floor(Math.random() * sampleMissionaries.length)];
            
            // ì „ì—­ í•¨ìˆ˜ ì‚¬ìš©
            if (typeof window.createMinimalPrayerPopup === 'function') {
                const popup = window.createMinimalPrayerPopup({
                    flagUrl: `https://flagcdn.com/w40/${sampleData.country_code}.png`,
                    name: sampleData.name,
                    country: sampleData.country
                });
                
                // íŒì—… ìœ„ì¹˜ ì„¤ì •
                popup.style.position = 'absolute';
                popup.style.top = '50%';
                popup.style.left = '50%';
                popup.style.transform = 'translate(-50%, -50%)';
                popup.style.zIndex = '1000';
                
                demoArea.appendChild(popup);
                
                // placeholder ìˆ¨ê¸°ê¸°
                const placeholder = demoArea.querySelector('.demo-placeholder');
                if (placeholder) {
                    placeholder.style.display = 'none';
                }
            } else {
                console.error('createMinimalPrayerPopup í•¨ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            }
        }

        // ìˆœíšŒ ì‹œì‘
        function startRotation() {
            if (typeof window.startPrayerRotation === 'function') {
                // ìƒ˜í”Œ ë°ì´í„°ë¡œ ìˆœíšŒ ë§¤ë‹ˆì € ì´ˆê¸°í™”
                if (window.floatingPrayerManager) {
                    window.floatingPrayerManager.missionaries = sampleMissionaries;
                    window.floatingPrayerManager.startRotation();
                    updateStatus(true);
                }
            } else {
                console.error('startPrayerRotation í•¨ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            }
        }

        // ìˆœíšŒ ì¤‘ì§€
        function stopRotation() {
            if (typeof window.stopPrayerRotation === 'function') {
                window.stopPrayerRotation();
                updateStatus(false);
            }
        }

        // íŒì—… ì§€ìš°ê¸°
        function clearPopups() {
            const popups = document.querySelectorAll('.minimal-prayer-popup');
            popups.forEach(popup => popup.remove());
            
            // placeholder ë‹¤ì‹œ í‘œì‹œ
            const placeholder = document.querySelector('.demo-placeholder');
            if (placeholder) {
                placeholder.style.display = 'block';
            }
        }

        // ìƒíƒœ ì—…ë°ì´íŠ¸
        function updateStatus(isActive) {
            const statusElement = document.getElementById('status');
            if (isActive) {
                statusElement.textContent = 'ìˆœíšŒ ì§„í–‰ ì¤‘...';
                statusElement.className = 'status active';
            } else {
                statusElement.textContent = 'ìˆœíšŒ ì¤‘ì§€ë¨';
                statusElement.className = 'status inactive';
            }
        }

        // ì‹¤ì œ ì„ êµì‚¬ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ì‹œë®¬ë ˆì´ì…˜
        function getMissionaryPrayerTopic(name) {
            const missionary = sampleMissionaries.find(m => m.name === name);
            return missionary ? missionary.prayer_topic : 'í•˜ë‚˜ë‹˜ì˜ ì¸ë„í•˜ì‹¬ê³¼ ì‚¬ì—­ì˜ ì—´ë§¤ë¥¼ ìœ„í•´ ê¸°ë„í•´ ì£¼ì„¸ìš”.';
        }

        // ê¸°ë„ í´ë¦­ í…ŒìŠ¤íŠ¸
        async function testPrayerClick() {
            console.log('ê¸°ë„ í´ë¦­ í…ŒìŠ¤íŠ¸ ì‹œì‘...');
            
            // PrayerClick ëª¨ë“ˆ ì´ˆê¸°í™” í™•ì¸
            if (!window.prayerClickManager || !window.prayerClickManager.isInitialized) {
                try {
                    await window.initializePrayerClick();
                } catch (error) {
                    console.error('PrayerClick ëª¨ë“ˆ ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
                    alert('Firebase ì—°ê²°ì´ í•„ìš”í•©ë‹ˆë‹¤. ì‹¤ì œ ì§€ë„ í˜ì´ì§€ì—ì„œ í…ŒìŠ¤íŠ¸í•´ì£¼ì„¸ìš”.');
                    return;
                }
            }
            
            // í…ŒìŠ¤íŠ¸ìš© ì„ êµì‚¬ ë°ì´í„°
            const testMissionary = sampleMissionaries[0];
            
            // ê°€ìƒì˜ MissionaryMap ê°ì²´ ìƒì„± (ì¢Œí‘œ ë³€í™˜ìš©)
            if (!window.MissionaryMap) {
                window.MissionaryMap = {
                    getLatLng: (missionary, country) => {
                        // íƒœêµ­ ì¢Œí‘œ ë°˜í™˜
                        return [15.8700, 100.9925];
                    },
                    map: {
                        latLngToContainerPoint: (latlng) => {
                            // ë°ëª¨ ì˜ì—­ ì¤‘ì•™ ì¢Œí‘œ ë°˜í™˜
                            const demoArea = document.getElementById('demo-area');
                            const rect = demoArea.getBoundingClientRect();
                            return {
                                x: rect.width / 2,
                                y: rect.height / 2
                            };
                        }
                    }
                };
            }
            
            // ê¸°ë„ í´ë¦­ ì‹¤í–‰
            try {
                const success = await window.handlePrayerClick(testMissionary);
                if (success) {
                    console.log('ê¸°ë„ í´ë¦­ í…ŒìŠ¤íŠ¸ ì„±ê³µ!');
                    alert('ê¸°ë„ í´ë¦­ì´ ì„±ê³µì ìœ¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤! ë‹¤ë¥¸ ì‚¬ìš©ìë“¤ì˜ í™”ë©´ì—ì„œ ì• ë‹ˆë©”ì´ì…˜ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
                } else {
                    console.log('ê¸°ë„ í´ë¦­ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨');
                    alert('ê¸°ë„ í´ë¦­ ì „ì†¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                console.error('ê¸°ë„ í´ë¦­ í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜:', error);
                alert('ê¸°ë„ í´ë¦­ í…ŒìŠ¤íŠ¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // ê¸°ë„ ì•ˆë‚´ íŒì—… í…ŒìŠ¤íŠ¸
        function testPrayerNotification() {
            const sampleData = sampleMissionaries[Math.floor(Math.random() * sampleMissionaries.length)];
            
            if (typeof window.showPrayerNotification === 'function') {
                window.showPrayerNotification(sampleData.name);
                console.log(`ê¸°ë„ ì•ˆë‚´ íŒì—… í…ŒìŠ¤íŠ¸: ${sampleData.name}`);
            } else {
                console.error('showPrayerNotification í•¨ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                alert('ê¸°ë„ ì•ˆë‚´ íŒì—… í•¨ìˆ˜ê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
            }
        }

        // ë™ì‹œ 10ê°œ ê¸°ë„ í´ë¦­ í…ŒìŠ¤íŠ¸
        async function testMultiplePrayerClicks() {
            console.log('ë™ì‹œ 10ê°œ ê¸°ë„ í´ë¦­ í…ŒìŠ¤íŠ¸ ì‹œì‘...');
            
            // í™•ì¥ëœ ìƒ˜í”Œ ë°ì´í„° (10ê°œ)
            const extendedSampleData = [
                { name: "ê¹€ì„ êµ", country: "íƒœêµ­", country_code: "th" },
                { name: "ì´ë³µìŒ", country: "í•„ë¦¬í•€", country_code: "ph" },
                { name: "ë°•ì‚¬ë‘", country: "ìº„ë³´ë””ì•„", country_code: "kh" },
                { name: "ì •ì€í˜œ", country: "ë² íŠ¸ë‚¨", country_code: "vn" },
                { name: "ìµœí‰í™”", country: "ë¼ì˜¤ìŠ¤", country_code: "la" },
                { name: "ì†¡í¬ë§", country: "ë¯¸ì–€ë§ˆ", country_code: "mm" },
                { name: "í•œë¯¿ìŒ", country: "ì¸ë„ë„¤ì‹œì•„", country_code: "id" },
                { name: "ì˜¤ì‚¬ë‘", country: "ì¸ë„", country_code: "in" },
                { name: "ì¥ê¸°ì¨", country: "ë„¤íŒ”", country_code: "np" },
                { name: "ìœ¤ê°ì‚¬", country: "ìŠ¤ë¦¬ë‘ì¹´", country_code: "lk" }
            ];
            
            // ê¸°ë„ ì•ˆë‚´ íŒì—… í…ŒìŠ¤íŠ¸ (showPrayerNotification ì‚¬ìš©)
            if (typeof window.showPrayerNotification === 'function') {
                console.log('ê¸°ë„ ì•ˆë‚´ íŒì—… ë™ì‹œ í…ŒìŠ¤íŠ¸ ì‹œì‘...');
                
                                 // ë™ì‹œì— ëª¨ë“  ê¸°ë„ ì•ˆë‚´ íŒì—…ì„ íì— ì¶”ê°€
                 extendedSampleData.forEach((missionary, index) => {
                     window.showPrayerNotification(missionary.name);
                     console.log(`${index + 1}/10: ${missionary.name} ê¸°ë„ ì•ˆë‚´ íŒì—… íì— ì¶”ê°€`);
                 });
                
                                 alert('10ê°œì˜ ê¸°ë„ ì•ˆë‚´ íŒì—…ì´ íì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!\ní ì‹œìŠ¤í…œì´ ìë™ìœ¼ë¡œ ìˆœì°¨ ì²˜ë¦¬í•©ë‹ˆë‹¤.\n\n"í ìƒíƒœ í™•ì¸" ë²„íŠ¼ìœ¼ë¡œ ì‹¤ì‹œê°„ ìƒíƒœë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!');
                 
                 // ì‹¤ì‹œê°„ ìƒíƒœ ì—…ë°ì´íŠ¸ (5ì´ˆê°„)
                 const statusInterval = setInterval(() => {
                     if (typeof window.getPrayerNotificationQueueStatus === 'function') {
                         const status = window.getPrayerNotificationQueueStatus();
                         console.log(`ì‹¤ì‹œê°„ í ìƒíƒœ - ëŒ€ê¸°: ${status.queueLength}ê°œ, ì²˜ë¦¬ì¤‘: ${status.isProcessing}`);
                         
                         // íê°€ ë¹„ì–´ìˆìœ¼ë©´ ìƒíƒœ ì—…ë°ì´íŠ¸ ì¤‘ì§€
                         if (status.queueLength === 0 && !status.isProcessing) {
                             clearInterval(statusInterval);
                             console.log('ëª¨ë“  ê¸°ë„ ì•ˆë‚´ íŒì—… ì²˜ë¦¬ ì™„ë£Œ!');
                         }
                     }
                 }, 500);
            } else {
                console.error('showPrayerNotification í•¨ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                alert('ê¸°ë„ ì•ˆë‚´ íŒì—… í•¨ìˆ˜ê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
                return;
            }
            
            // ì‹¤ì œ ê¸°ë„ í´ë¦­ í…ŒìŠ¤íŠ¸ (handlePrayerClick ì‚¬ìš©) - ì„ íƒì‚¬í•­
            if (window.handlePrayerClick && window.prayerClickManager?.isInitialized) {
                console.log('ì‹¤ì œ ê¸°ë„ í´ë¦­ ë™ì‹œ í…ŒìŠ¤íŠ¸ ì‹œì‘...');
                
                // ë™ì‹œì— 10ê°œ ê¸°ë„ í´ë¦­ ì‹¤í–‰
                const promises = extendedSampleData.map(async (missionary, index) => {
                    try {
                        const success = await window.handlePrayerClick({
                            name: missionary.name,
                            country: missionary.country,
                            flagUrl: `https://flagcdn.com/w40/${missionary.country_code}.png`
                        });
                        console.log(`${index + 1}/10: ${missionary.name} ê¸°ë„ í´ë¦­ ${success ? 'ì„±ê³µ' : 'ì‹¤íŒ¨'}`);
                        return success;
                    } catch (error) {
                        console.error(`${index + 1}/10: ${missionary.name} ê¸°ë„ í´ë¦­ ì˜¤ë¥˜:`, error);
                        return false;
                    }
                });
                
                // ëª¨ë“  ê¸°ë„ í´ë¦­ ì™„ë£Œ ëŒ€ê¸°
                try {
                    const results = await Promise.allSettled(promises);
                    const successCount = results.filter(result => 
                        result.status === 'fulfilled' && result.value === true
                    ).length;
                    
                    console.log(`ë™ì‹œ ê¸°ë„ í´ë¦­ í…ŒìŠ¤íŠ¸ ì™„ë£Œ: ${successCount}/10 ì„±ê³µ`);
                    
                    // 5ì´ˆ í›„ ê²°ê³¼ ì•Œë¦¼
                    setTimeout(() => {
                        alert(`ë™ì‹œ ê¸°ë„ í´ë¦­ í…ŒìŠ¤íŠ¸ ì™„ë£Œ!\nì„±ê³µ: ${successCount}/10\n\në‹¤ë¥¸ ë¸Œë¼ìš°ì € íƒ­ì—ì„œ ì‹¤ì‹œê°„ ì• ë‹ˆë©”ì´ì…˜ì„ í™•ì¸í•´ë³´ì„¸ìš”.`);
                    }, 5000);
                } catch (error) {
                    console.error('ë™ì‹œ ê¸°ë„ í´ë¦­ í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜:', error);
                }
            } else {
                console.log('ì‹¤ì œ ê¸°ë„ í´ë¦­ í…ŒìŠ¤íŠ¸ëŠ” Firebase ì—°ê²°ì´ í•„ìš”í•©ë‹ˆë‹¤.');
            }
                 }

        // í ìƒíƒœ í™•ì¸
        function checkQueueStatus() {
            if (typeof window.getPrayerNotificationQueueStatus === 'function') {
                const status = window.getPrayerNotificationQueueStatus();
                console.log('ê¸°ë„ ì•ˆë‚´ íŒì—… í ìƒíƒœ:', status);
                
                const message = `ê¸°ë„ ì•ˆë‚´ íŒì—… í ìƒíƒœ:
                
í ê¸¸ì´: ${status.queueLength}ê°œ
ì²˜ë¦¬ ì¤‘: ${status.isProcessing ? 'ì˜ˆ' : 'ì•„ë‹ˆì˜¤'}
ëŒ€ê¸° ì¤‘ì¸ ì„ êµì‚¬: ${status.currentQueue.length > 0 ? status.currentQueue.join(', ') : 'ì—†ìŒ'}`;
                
                alert(message);
            } else {
                alert('í ìƒíƒœ í™•ì¸ í•¨ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            }
        }

        // í ì´ˆê¸°í™”
        function clearQueue() {
            if (typeof window.clearPrayerNotificationQueue === 'function') {
                window.clearPrayerNotificationQueue();
                alert('ê¸°ë„ ì•ˆë‚´ íŒì—… íê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');
            } else {
                alert('í ì´ˆê¸°í™” í•¨ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            }
        }

        // ì „ì—­ í•¨ìˆ˜ë¡œ ë“±ë¡
        window.getMissionaryPrayerTopic = getMissionaryPrayerTopic;
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ë¯¸ë‹ˆë©€ ê¸°ë„ íŒì—… í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ë¡œë“œë¨');
            updateStatus(false);
            
            // PrayerClick ëª¨ë“ˆ ì´ˆê¸°í™” ì‹œë„
            setTimeout(async () => {
                try {
                    if (window.initializePrayerClick) {
                        await window.initializePrayerClick();
                        console.log('í…ŒìŠ¤íŠ¸ í˜ì´ì§€ì—ì„œ PrayerClick ëª¨ë“ˆ ì´ˆê¸°í™” ì™„ë£Œ');
                    }
                } catch (error) {
                    console.log('í…ŒìŠ¤íŠ¸ í˜ì´ì§€ì—ì„œ PrayerClick ëª¨ë“ˆ ì´ˆê¸°í™” ì‹¤íŒ¨ (Firebase ì—°ê²° í•„ìš”):', error);
                }
            }, 1000);
        });
    </script>
</body>
</html> 