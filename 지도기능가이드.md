# ê¸°ì¥ì„ êµì§€ë„ ê¸°ëŠ¥ ê°€ì´ë“œ

## ğŸ“‹ ê°œìš”

ê¸°ì¥ì„ êµì§€ë„ëŠ” ì „ ì„¸ê³„ ì„ êµì‚¬ë“¤ì˜ ì •ë³´ë¥¼ ì§€ë„ìƒì— í‘œì‹œí•˜ê³ , ì‹¤ì‹œê°„ ê¸°ë„ ìš”ì²­ê³¼ ì¤‘ë³´ê¸°ë„ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤.

---

## ğŸ—ºï¸ ì§€ë„ ê¸°ëŠ¥

### ê¸°ë³¸ ì§€ë„ ì¡°ì‘
- **í™•ëŒ€/ì¶•ì†Œ**: ë§ˆìš°ìŠ¤ íœ  ë˜ëŠ” +/- ë²„íŠ¼
- **ì´ë™**: ë§ˆìš°ìŠ¤ ë“œë˜ê·¸
- **ì „ì²´í™”ë©´**: ìš°ìƒë‹¨ ì „ì²´í™”ë©´ ë²„íŠ¼
- **ê²€ìƒ‰**: ì¢Œìƒë‹¨ ê²€ìƒ‰ì°½ì—ì„œ ì„ êµì‚¬/êµ­ê°€ ê²€ìƒ‰

### ë§ˆì»¤ ì‹œìŠ¤í…œ
- **êµ­ê°€ë³„ ë§ˆì»¤**: ê° êµ­ê°€ë³„ë¡œ ë‹¤ë¥¸ ìƒ‰ìƒì˜ ë§ˆì»¤
- **í´ëŸ¬ìŠ¤í„°ë§**: ê°€ê¹Œìš´ ë§ˆì»¤ë“¤ì´ ìë™ìœ¼ë¡œ ê·¸ë£¹í™”
- **í´ë¦­ ì´ë²¤íŠ¸**: ë§ˆì»¤ í´ë¦­ ì‹œ í•´ë‹¹ êµ­ê°€ ì„ êµì‚¬ ëª©ë¡ íŒì—…

---

## ğŸ™ ê¸°ë„íŒì—… ê¸°ëŠ¥

### ğŸ“ íŒŒì¼ êµ¬ì¡°

#### **JavaScript ëª¨ë“ˆ**
```
PcWeb/js/ui/
â”œâ”€â”€ prayerPopup.js          # ìƒˆë¡œìš´ ê¸°ë„íŒì—… ëª¨ë“ˆ v2.0 (ë©”ì¸)
â”œâ”€â”€ prayerPopupAdapter.js   # ê¸°ì¡´ ì‹œìŠ¤í…œ í˜¸í™˜ ì–´ëŒ‘í„°
â””â”€â”€ floatingPopups.js       # ê¸°ì¡´ í”Œë¡œíŒ… íŒì—… ì‹œìŠ¤í…œ

PcWeb/js/
â”œâ”€â”€ prayerclick.js          # ê¸°ë„ì† í´ë¦­ ì‹¤ì‹œê°„ ì• ë‹ˆë©”ì´ì…˜
â””â”€â”€ prayercount.js          # ì¤‘ë³´ê¸°ë„ì ìˆ˜ í‘œì‹œ
```

#### **CSS ìŠ¤íƒ€ì¼ì‹œíŠ¸**
```
PcWeb/css/
â”œâ”€â”€ prayerPopup.css         # ìƒˆë¡œìš´ ëª¨ë˜ ë””ìì¸ (v2.0)
â”œâ”€â”€ minimal-prayer-popup.css # ë¯¸ë‹ˆë©€ ë””ìì¸
â”œâ”€â”€ popup.css               # ê¸°ë³¸ íŒì—… ìŠ¤íƒ€ì¼
â””â”€â”€ features/
    â””â”€â”€ prayer-count.css    # ì¤‘ë³´ê¸°ë„ì ìˆ˜ ìŠ¤íƒ€ì¼
```

### ğŸ¨ ë””ìì¸ ì‹œìŠ¤í…œ

#### **1. ëª¨ë˜ ê¸€ë˜ìŠ¤ëª¨í”¼ì¦˜ v2.0**
```css
.prayer-popup-v2 {
    background: rgba(255, 255, 255, 0.85);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 16px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
}
```

**ì£¼ìš” íŠ¹ì§•:**
- âœ… 20px ë¸”ëŸ¬ íš¨ê³¼ë¡œ í˜„ëŒ€ì ì¸ ëŠë‚Œ
- âœ… ë¶€ë“œëŸ¬ìš´ í˜ì´ë“œ ì¸/ì•„ì›ƒ ì• ë‹ˆë©”ì´ì…˜
- âœ… ìƒíƒœë³„ ë²„íŠ¼ ì• ë‹ˆë©”ì´ì…˜ (ë¡œë”©, ì„±ê³µ, ì‹¤íŒ¨)
- âœ… ë‹¤í¬ ëª¨ë“œ ì™„ì „ ì§€ì›
- âœ… ì ‘ê·¼ì„± ê°œì„  (í¬ì»¤ìŠ¤ ìŠ¤íƒ€ì¼, ëª¨ì…˜ ê°ì†Œ)

#### **2. ë¯¸ë‹ˆë©€ ë””ìì¸**
```css
.minimal-prayer-popup {
    background: rgba(255, 255, 255, 0.95);
    border-radius: 12px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
}
```

**ì£¼ìš” íŠ¹ì§•:**
- âœ… ì»´íŒ©íŠ¸í•œ ì¹´ë“œ í˜•íƒœ
- âœ… ê¹”ë”í•œ ì •ë³´ ë ˆì´ì•„ì›ƒ
- âœ… í˜¸ë²„ ì‹œ ì¼ì‹œì •ì§€ ê¸°ëŠ¥
- âœ… ë‹«ê¸° ë²„íŠ¼ìœ¼ë¡œ íŒì—… ì œê±°

### âš™ï¸ í•µì‹¬ ê¸°ëŠ¥

#### **1. ìë™ ìˆœíšŒ ì‹œìŠ¤í…œ**
```javascript
class PrayerPopupManager {
    constructor() {
        this.animationDuration = 4000; // 4ì´ˆë§ˆë‹¤ ìˆœí™˜
        this.fadeDuration = 300;       // í˜ì´ë“œ ì• ë‹ˆë©”ì´ì…˜
    }
    
    startRotation() {
        // 4ì´ˆë§ˆë‹¤ ì„ êµì‚¬ ê¸°ë„ íŒì—… ìë™ ìˆœí™˜
    }
    
    pause() {
        // ë§ˆìš°ìŠ¤ ì˜¤ë²„ ì‹œ ì¼ì‹œì •ì§€
    }
    
    resume() {
        // ë§ˆìš°ìŠ¤ ì•„ì›ƒ ì‹œ ì¬ê°œ
    }
}
```

**ì‚¬ìš©ë²•:**
```javascript
// ìƒˆë¡œìš´ PrayerPopupManager ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
const prayerManager = new PrayerPopupManager();

// ìˆœíšŒ ì‹œì‘
prayerManager.startRotation();

// ìˆœíšŒ ì¤‘ì§€
prayerManager.stopRotation();

// ì¼ì‹œì •ì§€/ì¬ê°œ
prayerManager.pause();
prayerManager.resume();
```

#### **2. ì‹¤ì‹œê°„ ê¸°ë„ ì• ë‹ˆë©”ì´ì…˜**
```javascript
class PrayerClickManager {
    async handlePrayerClick(missionaryData) {
        // Firebase Realtime Databaseì— ê¸°ë„ ë°ì´í„° ì €ì¥
        // ëª¨ë“  ì‚¬ìš©ì í™”ë©´ì— ê¸°ë„ì† ì• ë‹ˆë©”ì´ì…˜ í‘œì‹œ
    }
    
    triggerAnimation(animationId, animationData) {
        // ì§€ë„ ìœ„ì— ê¸°ë„ì† ì• ë‹ˆë©”ì´ì…˜ ìƒì„±
        // 3ì´ˆê°„ ìƒìŠ¹í•˜ë©° í˜ì´ë“œì•„ì›ƒ
    }
}
```

**ê¸°ëŠ¥:**
- âœ… ì‹¤ì‹œê°„ìœ¼ë¡œ ëª¨ë“  ì‚¬ìš©ìì—ê²Œ ê¸°ë„ ì• ë‹ˆë©”ì´ì…˜ í‘œì‹œ
- âœ… Firebase Realtime Database ì—°ë™
- âœ… ì§€ë„ ì¢Œí‘œ ê¸°ë°˜ ì •í™•í•œ ìœ„ì¹˜ í‘œì‹œ
- âœ… ìë™ ì •ë¦¬ ì‹œìŠ¤í…œ (TTL ê¸°ë°˜)

#### **3. ì¤‘ë³´ê¸°ë„ì ìˆ˜ í‘œì‹œ**
```javascript
window.initPrayerCount = function(firebaseApp, onCountChange) {
    // ì‹¤ì‹œê°„ ì ‘ì†ì ìˆ˜ ì¶”ì 
    // Firebase Realtime Database í™œìš©
    // ìë™ ì •ë¦¬ (5ë¶„ ë¹„í™œì„± ì‚¬ìš©ì ì œê±°)
}
```

**ê¸°ëŠ¥:**
- âœ… ì‹¤ì‹œê°„ ì ‘ì†ì ìˆ˜ í‘œì‹œ
- âœ… ìë™ ì‚¬ìš©ì ìƒíƒœ ê°±ì‹  (30ì´ˆë§ˆë‹¤)
- âœ… ë¹„í™œì„± ì‚¬ìš©ì ìë™ ì •ë¦¬ (5ë¶„ ì´ìƒ)
- âœ… ì ‘ê·¼ì„± ì•ˆë‚´ (ìŠ¤í¬ë¦° ë¦¬ë” ì§€ì›)

### ğŸ¯ ì• ë‹ˆë©”ì´ì…˜ ì‹œìŠ¤í…œ

#### **1. ê¸°ë„ì† ì• ë‹ˆë©”ì´ì…˜**
```css
@keyframes prayer-hand-rise {
    0% { transform: translateY(0px) scale(0.8); opacity: 0; }
    10% { transform: translateY(-10px) scale(1); opacity: 1; }
    90% { transform: translateY(-80px) scale(0.6); opacity: 0.8; }
    100% { transform: translateY(-100px) scale(0.4); opacity: 0; }
}

.prayer-hand-animation.animated {
    animation: prayer-hand-rise 3s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards,
               prayer-hand-pulse 1s ease-in-out infinite;
}
```

#### **2. íŒì—… ì• ë‹ˆë©”ì´ì…˜**
```css
@keyframes prayer-popup-fade-in {
    from { opacity: 0; transform: translateY(20px) scale(0.95); }
    to { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes prayer-popup-fade-out {
    from { opacity: 1; transform: translateY(0) scale(1); }
    to { opacity: 0; transform: translateY(-15px) scale(0.95); }
}
```

#### **3. ë²„íŠ¼ ìƒíƒœ ì• ë‹ˆë©”ì´ì…˜**
```css
@keyframes prayer-btn-success {
    0% { transform: scale(1); background: linear-gradient(135deg, #10b981, #059669); }
    50% { transform: scale(1.1); background: linear-gradient(135deg, #10b981, #047857); }
    100% { transform: scale(1); background: linear-gradient(135deg, #10b981, #059669); }
}
```

### ğŸ”„ ì‹œìŠ¤í…œ í†µí•©

#### **ê¸°ì¡´ ì‹œìŠ¤í…œ í˜¸í™˜ì„±**
```javascript
// PrayerPopupAdapterë¥¼ í†µí•œ ì™„ì „ í˜¸í™˜
class PrayerPopupAdapter {
    constructor() {
        this.prayerManager = new PrayerPopupManager();
    }
    
    // ê¸°ì¡´ FloatingPrayerManager ì¸í„°í˜ì´ìŠ¤ ìœ ì§€
    startRotation() { this.prayerManager.startRotation(); }
    stopRotation() { this.prayerManager.stopRotation(); }
    pause() { this.prayerManager.pause(); }
    resume() { this.prayerManager.resume(); }
}
```

**ì „ì—­ í•¨ìˆ˜ í˜¸í™˜:**
```javascript
// ê¸°ì¡´ í•¨ìˆ˜ë“¤ ê·¸ëŒ€ë¡œ ì‚¬ìš© ê°€ëŠ¥
startPrayerRotation();
stopPrayerRotation();
isPrayerRotationActive();
createMinimalPrayerPopup({ flagUrl, name, country, missionary });
```

### ğŸ“± ë°˜ì‘í˜• ë””ìì¸

#### **ëª¨ë°”ì¼ ìµœì í™”**
```css
@media (max-width: 768px) {
    .prayer-popup-v2 {
        width: 300px;
        padding: 18px;
    }
    
    .minimal-prayer-popup {
        width: 300px;
        padding: 18px;
    }
    
    .prayer-count-info {
        top: 10px;
        right: 10px;
        font-size: 12px;
        padding: 8px 12px;
    }
}
```

### ğŸ”§ ì„¤ì • ë° ì»¤ìŠ¤í„°ë§ˆì´ì§•

#### **PrayerPopupManager ì„¤ì •**
```javascript
const prayerManager = new PrayerPopupManager();

prayerManager.updateSettings({
    animationDuration: 4000,  // ìˆœíšŒ ê°„ê²©
    fadeDuration: 300,        // í˜ì´ë“œ ì‹œê°„
    maxAnimations: 10,        // ìµœëŒ€ ë™ì‹œ ì• ë‹ˆë©”ì´ì…˜
    clickCooldown: 1000       // í´ë¦­ ì¿¨ë‹¤ìš´
});
```

#### **PRAYER_CONFIG ì„¤ì •**
```javascript
const PRAYER_CONFIG = {
    pulseRing: {
        enabled: true,
        color: 'rgba(76, 175, 80, 0.4)',
        maxScale: 2.5,
        duration: 800
    },
    toast: {
        enabled: true,
        position: 'top',
        duration: 3000,
        style: 'slide'
    }
};
```

### ğŸ¨ ë””ìì¸ í…Œë§ˆ

#### **ë¼ì´íŠ¸ ëª¨ë“œ**
- ë°°ê²½: `rgba(255, 255, 255, 0.85)`
- í…ìŠ¤íŠ¸: `#1f2937`
- ê°•ì¡°ìƒ‰: `#3b82f6`
- ì„±ê³µìƒ‰: `#10b981`

#### **ë‹¤í¬ ëª¨ë“œ**
```css
@media (prefers-color-scheme: dark) {
    .prayer-popup-v2 {
        background: rgba(31, 41, 55, 0.72);
        border-color: rgba(55, 65, 81, 0.38);
    }
    
    .popup-name { color: #f3f4f6; }
    .popup-location { color: #a1a7b7; }
}
```

### ğŸ§ª í…ŒìŠ¤íŠ¸ ì‹œìŠ¤í…œ

#### **í…ŒìŠ¤íŠ¸ í˜ì´ì§€**
- **`PcWeb/prayer-popup-test.html`**: v2.0 í…ŒìŠ¤íŠ¸
- **`PcWeb/warm-prayer-test.html`**: ë¯¸ë‹ˆë©€ ë””ìì¸ í…ŒìŠ¤íŠ¸

#### **í…ŒìŠ¤íŠ¸ ê¸°ëŠ¥**
- âœ… ìˆœíšŒ ì‹œì‘/ì¤‘ì§€/ì¼ì‹œì •ì§€/ì¬ê°œ
- âœ… ë‹¨ì¼ íŒì—… í‘œì‹œ
- âœ… ë§ˆì»¤ í´ë¦­ ì‹œ íŒì—… í‘œì‹œ
- âœ… ê¸°ë„ í´ë¦­ ì²˜ë¦¬ ì‹œë®¬ë ˆì´ì…˜
- âœ… ë°˜ì‘í˜• ë””ìì¸ í™•ì¸

### ğŸ“Š ì„±ëŠ¥ ìµœì í™”

#### **ë Œë”ë§ ìµœì í™”**
- CSS ì• ë‹ˆë©”ì´ì…˜ í™œìš©ìœ¼ë¡œ GPU ê°€ì†
- ë¶ˆí•„ìš”í•œ DOM ì¡°ì‘ ìµœì†Œí™”
- ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€ë¥¼ ìœ„í•œ ì´ë²¤íŠ¸ ì •ë¦¬

#### **ë¡œë”© ìµœì í™”**
- í•„ìš”í•œ ì‹œì ì—ë§Œ ëª¨ë“ˆ ì´ˆê¸°í™”
- ì§€ì—° ë¡œë”©ìœ¼ë¡œ ì´ˆê¸° í˜ì´ì§€ ë¡œë“œ ì‹œê°„ ë‹¨ì¶•

### ğŸ› ë¬¸ì œ í•´ê²°

#### **ì¼ë°˜ì ì¸ ë¬¸ì œë“¤**

1. **íŒì—…ì´ í‘œì‹œë˜ì§€ ì•ŠìŒ**
   ```javascript
   // MissionaryMap ê°ì²´ í™•ì¸
   console.log(window.MissionaryMap?.state?.missionaries);
   ```

2. **Firebase ì—°ê²° ì˜¤ë¥˜**
   ```javascript
   // Firebase ì´ˆê¸°í™” í™•ì¸
   console.log(window.firebase?.firestore);
   ```

3. **ìŠ¤íƒ€ì¼ì´ ì ìš©ë˜ì§€ ì•ŠìŒ**
   ```html
   <!-- CSS íŒŒì¼ ê²½ë¡œ í™•ì¸ -->
   <link rel="stylesheet" href="css/prayerPopup.css">
   ```

#### **ë””ë²„ê¹… ëª¨ë“œ**
```javascript
// ë””ë²„ê¹… ì •ë³´ í™œì„±í™”
const prayerManager = new PrayerPopupManager();
prayerManager.debug = true;
```

---

## ğŸ”® í–¥í›„ ê³„íš

### v2.1 ì˜ˆì • ê¸°ëŠ¥
- [ ] ì• ë‹ˆë©”ì´ì…˜ ì»¤ìŠ¤í„°ë§ˆì´ì§• ì˜µì…˜
- [ ] ë‹¤êµ­ì–´ ì§€ì›
- [ ] í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ ê°œì„ 
- [ ] ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ë„êµ¬

### v3.0 ê³„íš
- [ ] Web Components ê¸°ë°˜ ì¬êµ¬ì„±
- [ ] TypeScript ì§€ì›
- [ ] ë” ë§ì€ í…Œë§ˆ ì˜µì…˜
- [ ] í”ŒëŸ¬ê·¸ì¸ ì‹œìŠ¤í…œ

---

## ğŸ“ ì§€ì›

ë¬¸ì œê°€ ë°œìƒí•˜ê±°ë‚˜ ê°œì„  ì œì•ˆì´ ìˆìœ¼ì‹œë©´ ì´ìŠˆë¥¼ ë“±ë¡í•´ ì£¼ì„¸ìš”.

---

**ë²„ì „**: 2.0.0  
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2024ë…„ 12ì›”  
**í˜¸í™˜ì„±**: ê¸°ì¡´ ì‹œìŠ¤í…œ 100% í˜¸í™˜ 